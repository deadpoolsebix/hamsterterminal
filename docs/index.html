<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <title>Hamster Terminal - Bloomberg Clean with API</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --orange: #ff8c00;
      --burgundy: #800020;
      --black: #000000;
      --panel: #0a0a0a;
      --border: #1a1a1a;
      --green: #00ff41;
      --red: #ff0033;
      --yellow: #ffff00;
      --cyan: #00d4ff;
      --gray: #bdbdbd;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Roboto Mono', monospace;
      background: var(--black);
      color: #ffffff;
      line-height: 1.4;
      padding-bottom: 40px;
    }

    /* THEME SWITCHER */
    .theme-switcher {
      position: fixed;
      top: 10px;
      right: 10px;
      z-index: 999;
      background: rgba(10, 10, 10, 0.95);
      border: 1px solid #1a1a1a;
      border-radius: 4px;
      padding: 8px;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }
    .switcher-group {
      display: flex;
      flex-direction: row;
      gap: 3px;
    }
    .theme-btn, .page-btn {
      background: #0d0d0d;
      border: 1px solid #333;
      color: #ffffff;
      padding: 6px 10px;
      margin: 0;
      cursor: pointer;
      font-size: 0.75em;
      font-weight: 600;
      border-radius: 3px;
      transition: all 0.2s;
    }
    .theme-btn:hover, .page-btn:hover { background: #1a1a1a; border-color: #666; }
    .theme-btn.active, .page-btn.active { background: var(--orange); color: #000000; border-color: var(--orange); }
    .switcher-label {
      color: #666;
      font-size: 0.7em;
      text-transform: uppercase;
      padding: 2px 5px;
      font-weight: 700;
      letter-spacing: 0.5px;
    }

    /* BLOOMBERG HEADER */
    .header {
      background: var(--orange);
      color: #000000;
      padding: 14px 24px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-weight: 700;
      letter-spacing: 1px;
      font-size: 1.1em;
    }
    .header-left { display: flex; gap: 20px; align-items: center; }
    .header-time { font-size: 1em; font-weight: 600; }
    .api-status {
      font-size: 0.85em;
      padding: 4px 8px;
      background: rgba(0,0,0,0.1);
      border-radius: 3px;
    }
    .api-status.live { color: #00ff41; }
    .api-status.loading { color: #ffff00; }
    .api-status.error { color: #ff0033; }

    /* BURGUNDY MENU BAR */
    .menu-bar {
      display: flex;
      gap: 8px;
      padding: 10px 24px;
      background: var(--burgundy);
      border-bottom: 1px solid var(--border);
    }
    .menu-item {
      background: transparent;
      border: 1px solid transparent;
      color: #ffffff;
      padding: 8px 14px;
      cursor: pointer;
      font-weight: 600;
      transition: background 0.2s, border-color 0.2s;
      font-size: 0.95em;
    }
    .menu-item.active { background: #b0303c; border-color: #d44a5c; }
    .menu-item:hover { opacity: 0.9; }

    /* SECTION HEADER WITH SENTIMENT */
    .section-header-wrapper {
      display: grid;
      grid-template-columns: 1.5fr 1fr;
      gap: 14px;
      padding: 14px 24px 2px 24px;
      margin-bottom: 0;
    }
    .section-header {
      background: var(--panel);
      padding: 10px 15px;
      border-left: 2px solid #1a1a1a;
    }
    .section-title {
      font-size: 0.95em;
      font-weight: 700;
      color: #ffffff;
    }
    .section-subtitle {
      font-size: 0.8em;
      color: #333333;
      margin-top: 3px;
    }
    .section-sentiment {
      background: var(--panel);
      padding: 10px 15px;
      border-left: 2px solid #1a1a1a;
    }
    .section-sentiment h3 {
      font-size: 1.05em;
      font-weight: 700;
      color: #ffffff;
      margin-bottom: 8px;
      letter-spacing: 0.8px;
      text-transform: uppercase;
    }
    .sentiment-stat {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      font-size: 1em;
      font-weight: 600;
    }
    .stat-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 4px 0;
    }
    .stat-label { color: #ffffff; }
    .stat-value { color: #ffffff; font-size: 1.1em; }

    /* TICKER */
    .ticker-container {
      background: var(--panel);
      border: 1px solid var(--border);
      padding: 8px 0;
      overflow: hidden;
      margin: 0 24px 14px 24px;
    }
    .ticker {
      display: flex;
      animation: ticker 30s linear infinite;
      gap: 40px;
      padding: 0 24px;
    }
    .ticker-item {
      white-space: nowrap;
      font-size: 0.9em;
    }
    .ticker-label {
      color: #ffffff;
      font-weight: 700;
    }
    @keyframes ticker {
      0% { transform: translateX(40%); }
      100% { transform: translateX(-120%); }
    }

    /* NEWS */
    .news {
      background: var(--panel);
      border: 1px solid var(--border);
      padding: 12px;
    }
    .news h4 {
      color: #ffffff;
      margin-bottom: 10px;
      font-size: 1.15em;
      font-weight: 700;
      letter-spacing: 0.8px;
      text-transform: uppercase;
    }
    .news-item {
      font-size: 1em;
      margin-bottom: 7px;
      padding: 5px 0;
      border-bottom: 1px solid #1a1a1a;
      line-height: 1.6;
    }
    .news-item:last-child { border-bottom: none; }

    /* BREAKING NEWS */
    .breaking-news {
      background: var(--panel);
      border: 1px solid var(--border);
      padding: 12px;
    }
    .news-breaking-wrapper {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      padding: 0 24px 12px 24px;
    }
    .breaking-news h4 {
      color: #ffffff;
      margin-bottom: 12px;
      font-size: 1.15em;
      font-weight: 700;
      letter-spacing: 1.5px;
      text-transform: uppercase;
    }
    .breaking-item {
      display: grid;
      grid-template-columns: 0.8fr 1fr 1.2fr 0.7fr;
      gap: 10px;
      padding: 10px 8px;
      border-bottom: 1px solid #1a1a1a;
      font-size: 0.95em;
      align-items: center;
      line-height: 1.5;
    }
    .breaking-item:last-child { border-bottom: none; }
    .breaking-status {
      font-weight: 700;
      text-transform: uppercase;
      font-size: 0.85em;
      letter-spacing: 0.5px;
    }
    .breaking-category {
      font-weight: 700;
      color: var(--gray);
      font-size: 0.9em;
    }
    .breaking-source {
      color: var(--gray);
      font-size: 0.85em;
    }
    .breaking-headline {
      color: #ffffff;
      font-weight: 600;
      font-size: 1em;
    }
    .breaking-time {
      color: var(--gray);
      text-align: right;
      font-size: 0.8em;
    }

    /* BTC/ETH CARDS */
    .top-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 14px;
      padding: 14px 24px;
    }
    .card {
      background: var(--panel);
      border: 1px solid var(--border);
      padding: 14px;
    }
    .card h3 {
      color: #ffffff;
      font-size: 1em;
      margin-bottom: 6px;
    }
    .price {
      font-size: 2.4em;
      font-weight: 700;
      color: #ffffff;
    }
    .change {
      font-weight: 700;
      color: #ffffff;
    }
    .stat-row {
      display: flex;
      justify-content: space-between;
      font-size: 0.9em;
      color: var(--gray);
      margin-top: 8px;
    }

    /* MAIN GRID */
    .main-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 14px;
      padding: 14px 24px;
    }
    .chart-panel {
      background: var(--panel);
      border: 1px solid var(--border);
      border-left: 2px solid #1a1a1a;
      padding: 14px;
    }
    .transfers-inline {
      margin-top: 12px;
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    .transfer-card {
      flex: 1 1 220px;
      background: #0d0d0d;
      border-left: 2px solid #333;
      padding: 10px;
      color: #ffffff;
      min-width: 0;
    }
    .transfer-card .meta { color: var(--gray); font-size: 0.85em; }
    .transfer-card .time { color: var(--gray); font-size: 0.8em; margin-top: 4px; }

    /* GENIUS AI */
    .genius-ai {
      background: var(--panel);
      border: 1px solid var(--border);
      border-left: 2px solid #1a1a1a;
      padding: 14px;
      margin: 0 24px 14px 24px;
    }
    .genius-inline { margin: 14px 0 0 0; }
    .genius-ai-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 12px;
    }
    .genius-card {
      background: #0d0d0d;
      padding: 12px;
      border-left: 2px solid #333;
      border-radius: 3px;
    }
    .genius-card-title {
      color: #ffffff;
      font-weight: 700;
      font-size: 0.85em;
      margin-bottom: 6px;
      text-transform: uppercase;
    }
    .genius-card-content {
      color: var(--gray);
      font-size: 0.85em;
      line-height: 1.5;
    }

    /* TABS */
    .tab-content { display: none; }
    .tab-content.active { display: block; }

    /* Custom chart */
    .chart-canvas { background: #050505; border-radius: 4px; border: 1px solid #111; width: 100%; height: 320px; position: relative; overflow: hidden; }
    .band { position: absolute; left: 0; width: 100%; height: 60px; opacity: 0.08; }
    .band.premium { top: 0; background: linear-gradient(180deg, #ff0033 0%, transparent 100%); }
    .band.discount { bottom: 0; background: linear-gradient(0deg, #00ff41 0%, transparent 100%); }
    .band-label { position: absolute; left: 12px; font-size: 0.8em; color: #888; }
    .band-label.premium { top: 8px; }
    .band-label.discount { bottom: 8px; }
    .level { position: absolute; left: 0; width: 100%; border-top: 1px dashed #333; }
    .level.resistance { top: 70px; border-color: #ff5c5c; }
    .level.support { bottom: 70px; border-color: #4caf50; }
    .level-label { position: absolute; right: 8px; font-size: 0.8em; color: #aaa; }
    .ema { position: absolute; width: 100%; height: 100%; pointer-events: none; }
    .ema path { fill: none; stroke-width: 2; opacity: 0.9; }
    .ema20 path { stroke: #00d4ff; }
    .ema50 path { stroke: #ffb347; }
    .ema200 path { stroke: #9b59b6; }
    .price-line { position: absolute; right: 12px; top: 12px; color: #fff; font-weight: 700; font-size: 1em; }
    .signal { position: absolute; display: flex; align-items: center; gap: 6px; font-size: 0.9em; color: #fff; padding: 4px 8px; border-radius: 4px; }
    .signal.buy { background: rgba(0,255,65,0.14); border: 1px solid rgba(0,255,65,0.35); top: 120px; left: 20px; }
    .signal.sell { background: rgba(255,0,51,0.14); border: 1px solid rgba(255,0,51,0.35); top: 60px; left: 180px; }
    .signal .dot { width: 10px; height: 10px; border-radius: 50%; }
    .signal.buy .dot { background: #00ff41; }
    .signal.sell .dot { background: #ff0033; }
    .legend { position: absolute; bottom: 10px; right: 12px; display: flex; gap: 12px; font-size: 0.8em; color: #aaa; }
    .legend-item { display: flex; align-items: center; gap: 6px; }
    .legend-swatch { width: 16px; height: 3px; border-radius: 2px; }
    .swatch-ema20 { background: #00d4ff; }
    .swatch-ema50 { background: #ffb347; }
    .swatch-ema200 { background: #9b59b6; }

    /* VISUAL DARK PAGE */
    #visual-dark-page { scrollbar-width: thin; scrollbar-color: #333 #0a0a0a; }
    #visual-dark-page::-webkit-scrollbar { width: 6px; }
    #visual-dark-page::-webkit-scrollbar-track { background: #0a0a0a; }
    #visual-dark-page::-webkit-scrollbar-thumb { background: #333; border-radius: 3px; }

    /* RESPONSIVE */
    @media (max-width: 1200px) {
      .top-grid { grid-template-columns: repeat(2, 1fr); }
      .main-grid { grid-template-columns: 1fr; }
      .genius-ai-grid { grid-template-columns: repeat(2, 1fr); }
    }
    @media (max-width: 768px) {
      body { padding-top: 4px; }
      .top-grid { grid-template-columns: 1fr; padding: 10px 12px; }
      .ticker-container { padding: 0 12px; }
      .ticker-item { font-size: 0.95em; }
      .news-grid { grid-template-columns: 1fr !important; gap: 10px; padding: 0 12px 12px 12px !important; }
      .main-grid { padding: 10px 12px; }
      .chart-canvas { height: 240px; }
      .genius-ai { margin: 10px 0 0 0; }
      .genius-ai-grid { grid-template-columns: 1fr; }
      .header { flex-direction: column; gap: 10px; align-items: flex-start; }
      .theme-switcher { position: static; margin: 10px; }
      .switcher-group { flex-direction: column; }
      .menu-bar { flex-wrap: wrap; }
      .menu-item { flex: 1 1 48%; margin-bottom: 6px; }
    }
  </style>
</head>
<body>

  <!-- THEME & PAGE SWITCHER -->
  <div class="theme-switcher">
    <div class="switcher-label">MODES</div>
    <div class="switcher-group">
      <button class="page-btn active" onclick="switchPage('bloomberg', event)">Bloomberg</button>
      <button class="page-btn" onclick="switchPage('retro', event)">Retro Terminal</button>
      <button class="page-btn" onclick="switchPage('detailed', event)">Detailed Mode</button>
    </div>
    <div class="switcher-label" style="margin-top:8px;">THEMES</div>
    <div class="switcher-group">
      <button class="theme-btn active" onclick="switchTheme('bloomberg', event)">Bloomberg</button>
      <button class="theme-btn" onclick="switchTheme('professional', event)">Professional</button>
      <button class="theme-btn" onclick="switchTheme('dark', event)">Dark</button>
    </div>
  </div>

  <!-- HEADER -->
  <div class="header">
    <div class="header-left">
      <div>HAMSTER TERMINAL | BTC USD Crypto</div>
      <div class="api-status loading" id="api-status">Loading API...</div>
    </div>
    <div class="header-time">
      <span id="clock">00:00:00 UTC</span>
    </div>
  </div>

  <!-- MENU -->
  <div class="menu-bar">
    <button class="menu-item active" onclick="switchTab('dashboard')">Dashboard</button>
    <button class="menu-item" onclick="switchTab('trend-analysis')">Trend Analysis</button>
    <button class="menu-item" onclick="switchTab('kpi-correlation')">KPI Correlation</button>
    <button class="menu-item" onclick="switchTab('multi-tf-analysis')">Multi-TF Analysis</button>
  </div>

  <!-- CHART, AI, TRANSFERS -->
  <div class="main-grid">
    <div class="chart-panel">
      <div style="color: #ffffff; font-weight: 700; margin-bottom: 12px; font-size: 1.05em;">LIVE PRICE MAP (Signals & Levels)</div>
      <div class="chart-canvas">
        <div class="band premium"></div>
        <div class="band discount"></div>
        <div class="band-label premium">Premium zone</div>
        <div class="band-label discount">Discount zone</div>
        <div class="level resistance"></div>
        <div class="level support"></div>
        <div class="level-label" style="top:66px; color:#ff8c8c;">Resistance</div>
        <div class="level-label" style="bottom:66px; color:#7cff9c;">Support</div>

        <svg class="ema ema20" viewBox="0 0 100 100" preserveAspectRatio="none">
          <path d="M0,55 C20,50 40,52 60,48 80,44 90,46 100,43" />
        </svg>
        <svg class="ema ema50" viewBox="0 0 100 100" preserveAspectRatio="none">
          <path d="M0,58 C20,60 40,56 60,54 80,52 90,51 100,50" />
        </svg>
        <svg class="ema ema200" viewBox="0 0 100 100" preserveAspectRatio="none">
          <path d="M0,62 C20,63 40,64 60,63 80,62 90,61 100,60" />
        </svg>

        <div class="signal buy"><span class="dot"></span><span>BUY signal</span></div>
        <div class="signal sell"><span class="dot"></span><span>SELL signal</span></div>

        <div class="price-line" id="chart-price-label">$98,432.50</div>

        <div class="legend">
          <div class="legend-item"><span class="legend-swatch swatch-ema20"></span>EMA 20</div>
          <div class="legend-item"><span class="legend-swatch swatch-ema50"></span>EMA 50</div>
          <div class="legend-item"><span class="legend-swatch swatch-ema200"></span>EMA 200</div>
        </div>
      </div>

      <div class="genius-ai inline-genius">
        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px;">
          <h3 style="color: #ffffff; margin: 0;">GENIUS AI ANALYSIS</h3>
          <div style="color: var(--gray); font-size: 0.9em;">Auto-updated with live insights</div>
        </div>
        <div class="genius-ai-grid">
          <div class="genius-card">
            <div class="genius-card-title">Market Pulse</div>
            <div class="genius-card-content">Momentum tracking live — key support and resistance levels update in real time.</div>
          </div>
          <div class="genius-card">
            <div class="genius-card-title">Liquidity Radar</div>
            <div class="genius-card-content">Orderbook heatmap highlights: strong bids near $95,000, offers around $99,800.</div>
          </div>
          <div class="genius-card">
            <div class="genius-card-title">Sentiment Watch</div>
            <div class="genius-card-content">Aggregated sentiment tilts bullish; monitoring fear & greed index and funding flips.</div>
          </div>
          <div class="genius-card">
            <div class="genius-card-title">Risk Monitor</div>
            <div class="genius-card-content">Position sizing adjusted to volatility; alerts on funding spikes and correlation shifts.</div>
          </div>
        </div>
      </div>

      <div style="color: #ffffff; font-weight: 700; margin: 14px 0 8px 0; font-size: 1.05em;">LARGE TRANSFERS</div>
      <div class="transfers-inline">
        <div class="transfer-card">
          <div style="font-weight: 700;">1,250 BTC</div>
          <div class="meta">SELL • Whale Activity</div>
          <div class="time">19:32 UTC</div>
        </div>
        <div class="transfer-card">
          <div style="font-weight: 700;">890 BTC</div>
          <div class="meta">BUY • Accumulation Signal</div>
          <div class="time">19:28 UTC</div>
        </div>
        <div class="transfer-card">
          <div style="font-weight: 700;">2,100 BTC</div>
          <div class="meta">SELL • Major Outflow</div>
          <div class="time">19:15 UTC</div>
        </div>
      </div>
    </div>
  </div>
        <span>Market Sentiment</span>
        <span id="fng-label">--</span>
      </div>
    </div>
  </div>

  <!-- TICKER -->
  <div class="ticker-container">
    <div class="ticker">
      <div class="ticker-item">
        <span class="ticker-label">BTC/USD:</span> <span id="ticker-btc">$0</span>
      </div>
      <div class="ticker-item">
        <span class="ticker-label">ETH/USD:</span> <span id="ticker-eth">$0</span>
      </div>
      <div class="ticker-item">
        <span class="ticker-label">SPY:</span> <span id="ticker-spy">$0</span>
      </div>
      <div class="ticker-item">
        <span class="ticker-label">GOLD:</span> <span id="ticker-gold">$0</span>
      </div>
      <div class="ticker-item">
        <span class="ticker-label">EUR/USD:</span> <span id="ticker-eur">$0</span>
      </div>
    </div>
  </div>

  <!-- NEWS SECTIONS -->
  <div class="news-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 14px; padding: 0 24px 14px 24px;">
    <div class="news">
      <h4>LIVE NEWS</h4>
      <div class="news-item">BTC consolidating around $98.5k support level</div>
      <div class="news-item">Ethereum breaking above $3.8k resistance</div>
      <div class="news-item">Fed policy meeting scheduled for next week</div>
      <div class="news-item">AI stocks rallying on earnings beat</div>
      <div class="news-item">Crypto market volume increasing steadily</div>
    </div>
    <div class="news">
      <h4>MARKET ALERTS</h4>
      <div class="news-item">Major liquidation zone at $97.2k identified</div>
      <div class="news-item">Bitcoin funding rates elevated - caution advised</div>
      <div class="news-item">Large transfer detected: 1,250 BTC moved</div>
      <div class="news-item">DXY approaching key resistance level</div>
      <div class="news-item">Gold futures gaining on market uncertainty</div>
    </div>
  </div>

  <!-- TRANSFERS -->
  <div class="main-grid">
    <div class="chart-panel">
      <div style="color: #ffffff; font-weight: 700; margin: 14px 0 8px 0; font-size: 1.05em;">LARGE TRANSFERS</div>
      <div class="transfers-inline">
        <div class="transfer-card">
          <div style="font-weight: 700;">1,250 BTC</div>
          <div class="meta">SELL • Whale Activity</div>
          <div class="time">19:32 UTC</div>
        </div>
        <div class="transfer-card">
          <div style="font-weight: 700;">890 BTC</div>
          <div class="meta">BUY • Accumulation Signal</div>
          <div class="time">19:28 UTC</div>
        </div>
        <div class="transfer-card">
          <div style="font-weight: 700;">2,100 BTC</div>
          <div class="meta">SELL • Major Outflow</div>
          <div class="time">19:15 UTC</div>
        </div>
      </div>
    </div>
  </div>

  <!-- GENIUS AI + PRICE MAP (bottom) -->
  <div class="genius-ai" style="margin: 0 24px 14px 24px;">
    <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 10px;">
      <h3 style="color: #ffffff; margin: 0;">GENIUS AI ANALYSIS</h3>
      <div style="color: var(--gray); font-size: 0.9em;">Auto-updated with live insights</div>
    </div>
    <div class="genius-ai-grid">
      <div class="genius-card">
        <div class="genius-card-title">Market Pulse</div>
        <div class="genius-card-content" id="genius-pulse">Momentum tracking live — key support and resistance levels update in real time.</div>
      </div>
      <div class="genius-card">
        <div class="genius-card-title">Liquidity Radar</div>
        <div class="genius-card-content" id="genius-liquidity">Orderbook heatmap highlights: strong bids near $95,000, offers around $99,800.</div>
      </div>
      <div class="genius-card">
        <div class="genius-card-title">Sentiment Watch</div>
        <div class="genius-card-content" id="genius-sentiment">Aggregated sentiment tilts bullish; monitoring fear & greed index and funding flips.</div>
      </div>
      <div class="genius-card">
        <div class="genius-card-title">Risk Monitor</div>
        <div class="genius-card-content" id="genius-risk">Position sizing adjusted to volatility; alerts on funding spikes and correlation shifts.</div>
      </div>
    </div>

    <div style="margin-top: 14px;">
      <div style="color: #ffffff; font-weight: 700; margin-bottom: 10px; font-size: 1.05em;">PRICE MAP (Signals & Levels)</div>
      <div class="chart-canvas">
        <div class="band premium"></div>
        <div class="band discount"></div>
        <div class="band-label premium">Premium zone</div>
        <div class="band-label discount">Discount zone</div>
        <div class="level resistance"></div>
        <div class="level support"></div>
        <div class="level-label" style="top:66px; color:#ff8c8c;">Resistance</div>
        <div class="level-label" style="bottom:66px; color:#7cff9c;">Support</div>

        <svg class="ema ema20" viewBox="0 0 100 100" preserveAspectRatio="none">
          <path d="M0,55 C20,50 40,52 60,48 80,44 90,46 100,43" />
        </svg>
        <svg class="ema ema50" viewBox="0 0 100 100" preserveAspectRatio="none">
          <path d="M0,58 C20,60 40,56 60,54 80,52 90,51 100,50" />
        </svg>
        <svg class="ema ema200" viewBox="0 0 100 100" preserveAspectRatio="none">
          <path d="M0,62 C20,63 40,64 60,63 80,62 90,61 100,60" />
        </svg>

        <div class="signal buy"><span class="dot"></span><span>BUY signal</span></div>
        <div class="signal sell"><span class="dot"></span><span>SELL signal</span></div>

        <div class="price-line" id="chart-price-label">$98,432.50</div>

        <div class="legend">
          <div class="legend-item"><span class="legend-swatch swatch-ema20"></span>EMA 20</div>
          <div class="legend-item"><span class="legend-swatch swatch-ema50"></span>EMA 50</div>
          <div class="legend-item"><span class="legend-swatch swatch-ema200"></span>EMA 200</div>
        </div>
      </div>
    </div>
  </div>

  <!-- TAB CONTENT - TREND ANALYSIS -->
  <div id="trend-analysis" class="tab-content">
    <div style="padding: 0 24px;">
      <h2 style="color: #ffffff; margin-bottom: 14px; font-size: 1.2em; font-weight: 700;">TREND ANALYSIS - Bitcoin</h2>
      <div style="background: var(--panel); border: 1px solid var(--border); border-left: 2px solid #1a1a1a; padding: 14px;">
        <h3 style="color: #ffffff; margin-bottom: 10px; font-weight: 700;">TECHNICAL SUMMARY</h3>
        <ul style="list-style: none; padding-left: 0; color: #ffffff; font-size: 0.9em; line-height: 1.6;">
          <li>RSI: 55 (Neutral) • Momentum: Increasing</li>
          <li>MACD: Positive crossover confirmed</li>
          <li>Moving Averages: Golden cross on 1H</li>
          <li>Volume: Above average, confirming uptrend</li>
        </ul>
        <h3 style="color: #ffffff; margin-bottom: 10px; font-weight: 700; margin-top: 12px;">TRADER ACTION PLAN</h3>
        <p style="color: var(--gray); margin-bottom: 8px; font-size: 0.9em;"><strong>Current Strategy:</strong> <span style="color: #ffffff;">LONG BIAS</span></p>
        <ul style="list-style: none; padding-left: 0; color: #ffffff; font-size: 0.9em; line-height: 1.6;">
          <li>Entry Zone: $98,000 - $98,500 (Support)</li>
          <li>Stop Loss: $96,500 (Major support break)</li>
          <li>Take Profit 1: $99,500 (Resistance)</li>
          <li>Take Profit 2: $100,000 (Psychological level)</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- TAB CONTENT - KPI CORRELATION -->
  <div id="kpi-correlation" class="tab-content">
    <div style="padding: 0 24px;">
      <h2 style="color: #ffffff; margin-bottom: 14px; font-size: 1.2em; font-weight: 700;">KPI CORRELATION ANALYSIS</h2>
      <div style="background: var(--panel); border: 1px solid var(--border); border-left: 2px solid #1a1a1a; padding: 14px; font-size: 0.9em; color: #ffffff;">
        <p>BTC–ETH: <span style="color: #ffffff; font-weight:700;" id="corr-btc-eth">0.86</span></p>
        <p>BTC–NASDAQ: <span style="color: #ffffff; font-weight:700;" id="corr-btc-nasdaq">0.62</span></p>
        <p>BTC–GOLD: <span style="color: #ffffff; font-weight:700;">-0.15</span></p>
        <p>ETH–NASDAQ: <span style="color: #ffffff; font-weight:700;">0.71</span></p>
      </div>
    </div>
  </div>

  <!-- TAB CONTENT - MULTI-TF ANALYSIS -->
  <div id="multi-tf-analysis" class="tab-content">
    <div style="padding: 0 24px;">
      <h2 style="color: #ffffff; margin-bottom: 14px; font-size: 1.2em;">MULTI-TIMEFRAME ANALYSIS</h2>
      <div style="background: var(--panel); border: 1px solid var(--border); border-left: 2px solid #1a1a1a; padding: 14px; font-size: 0.9em; color: #ffffff;">
        <div>1H: Bullish bias, RSI 55, MACD +</div>
        <div>4H: Strong uptrend, EMA bullish alignment</div>
        <div>1D: Long-term support at $95k, resistance at $100k</div>
        <div style="margin-top: 12px; color: var(--gray); font-size: 0.85em;">All timeframes aligned for upside move</div>
      </div>
    </div>
  </div>

  <!-- RETRO TERMINAL (gameboy/professional) -->
  <iframe id="retro-page" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100vh; border: none; z-index: 1000;" src="professional_dashboard_final.html"></iframe>

  <!-- DETAILED MODE (iframe poprzednia wersja) -->
  <iframe id="detailed-mode-page" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100vh; border: none; z-index: 1000;" src="demo_bloomberg_tabs_clean.html"></iframe>

  <script>
    // ========== API CONFIGURATION ===========
    const API_BASE = window.location.hostname === 'localhost' 
      ? 'http://localhost:5000'
      : 'https://api.hamsterterminal.com';

    const MOCK_DATA = {
      btcPrice: 98432.5,
      btcChange24h: 1.84,
      btcVolume: 18_200_000_000,
      btcMarketCap: 1_940_000_000_000,
      ethPrice: 3650,
      fear_greed: 68
    };

    let apiConnected = false;
    let lastDataUpdate = Date.now();
    let currentPage = 'dashboard';

    // ========== CLOCK ===========
    function updateTime() {
      const now = new Date();
      const utc = now.toISOString().split('T')[1].slice(0,8);
      document.getElementById('clock').textContent = `${utc} UTC`;
    }
    setInterval(updateTime, 1000);

    // ========== API DATA FETCHER ==========
    async function fetchApiData() {
      try {
        const response = await fetch(`${API_BASE}/api/binance/summary`, {
          cache: 'no-store',
          headers: { 'Accept': 'application/json' }
        });
        
        if (!response.ok) throw new Error(`HTTP ${response.status}`);
        
        const data = await response.json();
        
        // Update UI with real data
        updateDashboardWithData(data);
        setApiStatus('live', '✓ Live Data');
        apiConnected = true;
        lastDataUpdate = Date.now();
        
      } catch (error) {
        console.log('API error:', error);
        updateDashboardWithData(MOCK_DATA);
        setApiStatus('error', '✗ Mock Data');
        apiConnected = false;
      }
    }

    function updateDashboardWithData(data) {
      // BTC Price
      if (data.btcPrice) {
        document.getElementById('btc-price').textContent = `$${data.btcPrice.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
        document.getElementById('ticker-btc').textContent = `$${data.btcPrice.toLocaleString('en-US', { minimumFractionDigits: 0 })}`;
        const chartLabel = document.getElementById('chart-price-label');
        if (chartLabel) chartLabel.textContent = `$${data.btcPrice.toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 })}`;
      }
      
      // BTC Change
      if (data.btcChange24h !== undefined) {
        const changePercent = data.btcChange24h.toFixed(2);
        document.getElementById('btc-change').textContent = `${changePercent > 0 ? '+' : ''}${changePercent}%`;
      }
      
      // Volume
      if (data.btcVolume) {
        const volumeB = (data.btcVolume / 1e9).toFixed(1);
        document.getElementById('btc-volume').textContent = `$${volumeB}B`;
      }
      
      // Market Cap
      if (data.btcMarketCap) {
        const marketCapT = (data.btcMarketCap / 1e12).toFixed(2);
        document.getElementById('market-cap').textContent = `$${marketCapT}T`;
      }
      
      // Fear & Greed
      if (data.fear_greed !== undefined) {
        const fng = data.fear_greed;
        document.getElementById('fear-greed').textContent = fng;
        const label = fng < 25 ? 'EXTREME FEAR' : fng < 45 ? 'FEAR' : fng < 55 ? 'NEUTRAL' : fng < 75 ? 'GREED' : 'EXTREME GREED';
        document.getElementById('fng-label').textContent = label;
      }
      
      // ETH Price
      if (data.ethPrice) {
        document.getElementById('ticker-eth').textContent = `$${data.ethPrice.toLocaleString('en-US', { minimumFractionDigits: 0 })}`;
      }

      // Derived simple tickers (placeholder spreads for non-crypto assets)
      const spy = data.btcPrice ? (data.btcPrice / 50).toFixed(2) : '500.00';
      const gold = data.btcPrice ? (data.btcPrice / 50).toFixed(1) : '2000.0';
      const eurusd = data.btcPrice ? (1.05 + (data.btcChange24h || 0) * 0.0001).toFixed(4) : '1.0850';
      document.getElementById('ticker-spy').textContent = `$${spy}`;
      document.getElementById('ticker-gold').textContent = `$${gold}`;
      document.getElementById('ticker-eur').textContent = eurusd;

      // LIVE NEWS (auto-generated from data)
      const newsLeft = document.querySelector('.news:nth-of-type(1)');
      if (newsLeft) {
        const price = data.btcPrice ? `$${data.btcPrice.toLocaleString('en-US', { minimumFractionDigits: 0 })}` : 'BTC';
        const changeTxt = data.btcChange24h !== undefined ? `${data.btcChange24h > 0 ? '▲' : '▼'} ${Math.abs(data.btcChange24h).toFixed(2)}%` : '';
        const volTxt = data.btcVolume ? `24h vol ${(data.btcVolume / 1e9).toFixed(1)}B` : '24h vol --';
        newsLeft.innerHTML = `
          <h4>LIVE NEWS</h4>
          <div class="news-item">BTC trades at ${price} ${changeTxt}</div>
          <div class="news-item">ETH prints ${document.getElementById('ticker-eth').textContent || '$--'} intraday</div>
          <div class="news-item">${volTxt} on majors</div>
          <div class="news-item">Fear & Greed: ${data.fear_greed ?? '--'}</div>
          <div class="news-item">API status: ${apiConnected ? 'Live' : 'Mock'} data</div>
        `;
      }

      // MARKET ALERTS (simple auto content)
      const newsRight = document.querySelector('.news:nth-of-type(2)');
      if (newsRight) {
        const mc = data.btcMarketCap ? `$${(data.btcMarketCap / 1e12).toFixed(2)}T` : '$--';
        const fngLabel = data.fear_greed !== undefined
          ? (data.fear_greed < 25 ? 'Extreme Fear' : data.fear_greed < 45 ? 'Fear' : data.fear_greed < 55 ? 'Neutral' : data.fear_greed < 75 ? 'Greed' : 'Extreme Greed')
          : '--';
        newsRight.innerHTML = `
          <h4>MARKET ALERTS</h4>
          <div class="news-item">Market Cap: ${mc}</div>
          <div class="news-item">Sentiment: ${fngLabel}</div>
          <div class="news-item">Liquidity watch: BTC support $94k–$96k</div>
          <div class="news-item">Volatility check: keep stops dynamic</div>
          <div class="news-item">Data refreshed: ${new Date().toUTCString().slice(17,25)} UTC</div>
        `;
      }

      // GENIUS AI CARDS (lite dynamic text)
      const geniusCards = document.querySelectorAll('.genius-card-content');
      if (geniusCards.length >= 4) {
        const priceStr = data.btcPrice ? `$${data.btcPrice.toLocaleString('en-US', { minimumFractionDigits: 0 })}` : 'BTC';
        geniusCards[0].textContent = `Momentum tracking: ${priceStr} with change ${(data.btcChange24h ?? 0).toFixed(2)}%.`;
        geniusCards[1].textContent = data.btcVolume ? `Liquidity: ${(data.btcVolume / 1e9).toFixed(1)}B 24h volume, watch walls at $95k/$97k.` : 'Liquidity steady, monitoring orderbook levels.';
        geniusCards[2].textContent = data.fear_greed !== undefined ? `Sentiment gauge: ${data.fear_greed} F&G — ${document.getElementById('fng-label').textContent}.` : 'Sentiment neutral baseline.';
        geniusCards[3].textContent = data.btcMarketCap ? `Risk: Market cap ${ (data.btcMarketCap / 1e12).toFixed(2)}T, adjust size to volatility.` : 'Risk: size positions based on volatility bands.';
      }

      // LARGE TRANSFERS (dynamic whale activity based on price volatility)
      const transfersContainers = document.querySelectorAll('.transfers-inline');
      transfersContainers.forEach(container => {
        const volatility = Math.abs(data.btcChange24h ?? 0);
        const baseAmount = 500 + volatility * 10;
        
        const transfers = [
          {
            amount: (baseAmount * (1 + Math.random() * 2)).toFixed(0),
            type: volatility > 2 ? 'SELL • Whale Activity' : 'BUY • Accumulation',
            time: `${String(Math.floor(Math.random() * 24)).padStart(2, '0')}:${String(Math.floor(Math.random() * 60)).padStart(2, '0')} UTC`
          },
          {
            amount: (baseAmount * (0.5 + Math.random())).toFixed(0),
            type: volatility > 1.5 ? 'BUY • Buying Pressure' : 'SELL • Distribution',
            time: `${String(Math.floor(Math.random() * 24)).padStart(2, '0')}:${String(Math.floor(Math.random() * 60)).padStart(2, '0')} UTC`
          },
          {
            amount: (baseAmount * (1.5 + Math.random() * 1.5)).toFixed(0),
            type: data.fear_greed < 50 ? 'SELL • Major Outflow' : 'BUY • Large Inflow',
            time: `${String(Math.floor(Math.random() * 24)).padStart(2, '0')}:${String(Math.floor(Math.random() * 60)).padStart(2, '0')} UTC`
          }
        ];
        
        const cards = container.querySelectorAll('.transfer-card');
        transfers.forEach((transfer, i) => {
          if (cards[i]) {
            cards[i].innerHTML = `
              <div style="font-weight: 700;">${transfer.amount} BTC</div>
              <div class="meta">${transfer.type}</div>
              <div class="time">${transfer.time}</div>
            `;
          }
        });
      });
      
      // Sentiment (random for demo)
      const bulls = Math.floor(40 + Math.random() * 30);
      const bears = 100 - bulls;
      document.getElementById('bulls-percent').textContent = `${bulls}%`;
      document.getElementById('bears-percent').textContent = `${bears}%`;
    }

    function setApiStatus(status, text) {
      const el = document.getElementById('api-status');
      el.textContent = text;
      el.className = `api-status ${status}`;
    }

    // ========== PAGE SWITCHER ===========
    function switchPage(page, evt) {
      currentPage = page;
      const target = evt?.currentTarget || evt?.target;
      
      // Update button states
      document.querySelectorAll('.page-btn').forEach(btn => btn.classList.remove('active'));
      if (target) target.classList.add('active');
      
      // Get all dashboard elements
      const header = document.querySelector('.header');
      const menuBar = document.querySelector('.menu-bar');
      const sectionHeaderWrapper = document.querySelector('.section-header-wrapper');
      const tickerContainer = document.querySelector('.ticker-container');
      const newsBreakingWrapper = document.querySelector('.news-breaking-wrapper');
      const topGrid = document.querySelector('.top-grid');
      const mainGrid = document.querySelector('.main-grid');
      const geniusAi = document.querySelector('.genius-ai');
      const tabContents = document.querySelectorAll('.tab-content');
      const detailedModePage = document.getElementById('detailed-mode-page');
      const retroPage = document.getElementById('retro-page');
      
      if (page === 'detailed' || page === 'retro') {
        // Hide Bloomberg
        if (header) header.style.display = 'none';
        if (menuBar) menuBar.style.display = 'none';
        if (sectionHeaderWrapper) sectionHeaderWrapper.style.display = 'none';
        if (tickerContainer) tickerContainer.style.display = 'none';
        if (newsBreakingWrapper) newsBreakingWrapper.style.display = 'none';
        if (topGrid) topGrid.style.display = 'none';
        if (mainGrid) mainGrid.style.display = 'none';
        if (geniusAi) geniusAi.style.display = 'none';
        tabContents.forEach(el => el.style.display = 'none');
        // Show requested iframe, hide the other
        if (detailedModePage) detailedModePage.style.display = (page === 'detailed') ? 'block' : 'none';
        if (retroPage) retroPage.style.display = (page === 'retro') ? 'block' : 'none';
      } else {
        // Show Bloomberg
        if (header) header.style.display = '';
        if (menuBar) menuBar.style.display = '';
        if (sectionHeaderWrapper) sectionHeaderWrapper.style.display = '';
        if (tickerContainer) tickerContainer.style.display = '';
        if (newsBreakingWrapper) newsBreakingWrapper.style.display = '';
        if (topGrid) topGrid.style.display = '';
        if (mainGrid) mainGrid.style.display = '';
        if (geniusAi) geniusAi.style.display = '';
        document.querySelector('.tab-content.active')?.style ? (document.querySelector('.tab-content.active').style.display = 'block') : null;
        // Hide iframes
        if (detailedModePage) detailedModePage.style.display = 'none';
        if (retroPage) retroPage.style.display = 'none';
      }
    }

    // ========== THEME SWITCHER ===========
    function switchTheme(theme, evt) {
      const target = evt?.currentTarget || evt?.target;
      document.querySelectorAll('.theme-btn').forEach(btn => btn.classList.remove('active'));
      if (target) target.classList.add('active');
      
      let style = `
        body { background: var(--black); color: #ffffff; }
        .header { background: var(--orange); }
        .menu-bar { background: var(--burgundy); }
      `;
      
      if (theme === 'professional') {
        style += `
          body { background: #1a1a2e; }
          .header { background: #0f3460; }
          .menu-bar { background: #16213e; }
        `;
      } else if (theme === 'dark') {
        style += `
          body { background: #1a1a1a; }
          .header { background: #2d2d2d; }
          .menu-bar { background: #1a1a1a; }
        `;
      }
      
      let styleEl = document.getElementById('dynamic-style');
      if (!styleEl) {
        styleEl = document.createElement('style');
        styleEl.id = 'dynamic-style';
        document.head.appendChild(styleEl);
      }
      styleEl.textContent = style;
    }

    // ========== TAB SWITCHER ==========
    function switchTab(tab) {
      document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
      document.querySelectorAll('.menu-item').forEach(el => el.classList.remove('active'));
      
      if (tab === 'dashboard') {
        document.querySelector('[onclick="switchTab(\'dashboard\')"]').classList.add('active');
      } else {
        document.getElementById(tab).classList.add('active');
        document.querySelector(`[onclick="switchTab('${tab}')"]`).classList.add('active');
      }
    }

    // ========== INIT ==========
    function init() {
      updateTime();
      switchTheme('bloomberg');
      fetchApiData();
      setInterval(fetchApiData, 10000); // Update every 10 seconds
    }

    window.addEventListener('DOMContentLoaded', init);
  </script>

</body>
</html>
